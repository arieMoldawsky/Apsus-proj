import {eventBus} from '../../../../service/event-bus-service.js'
import keepColor from './keep-color.cmp.js'


export default {
    props: ['keep'],
    template: `
        <div class="keep-controls">
            <svg :class="{pinned: keep.isPinned}" @click="togglePin" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"><g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M6663.2,4984.8c-127.4-55.5-334.8-320.4-451.9-575.2c-127.4-273.2-164.3-456-164.3-803.2c0-260.9,8.2-332.8,47.2-472.5c217.8-755.9,891.5-1505.7,1647.5-1828.2c451.9-193.1,875.1-215.7,1335.2-67.8c382.1,121.2,778.6,414.9,813.5,601.9c84.2,456-386.2,1290-1164.7,2058.3c-318.4,312.2-517.7,478.6-819.6,682C7382.1,4931.4,6899.4,5089.6,6663.2,4984.8z M7686.1,4235c213.6-108.9,482.7-324.6,797-636.8c435.5-435.5,690.2-803.2,712.8-1025c10.3-125.3-22.6-158.2-150-143.8c-221.8,26.7-585.4,281.4-1018.9,712.8c-312.2,314.3-525.9,581.3-636.8,797c-74,145.8-98.6,297.9-57.5,347.1C7373.9,4335.7,7532.1,4313.1,7686.1,4235z"/><path d="M5143,2616.3c-338.9-240.3-638.9-466.3-667.6-501.2c-74-94.5-84.2-328.7-20.5-536.1C4660.3,901,5397.8,77.3,6129.1-286.3c275.3-137.6,431.4-184.9,616.3-184.9c228,2.1,252.7,22.6,595.7,505.3c168.4,236.2,367.7,517.7,445.8,624.5c76,106.8,139.7,199.3,139.7,207.5c0,6.2-67.8,32.9-147.9,57.5c-439.6,141.7-998.3,525.9-1347.5,930.6c-262.9,304-501.2,704.6-618.3,1045.6l-53.4,154.1L5143,2616.3z"/><path d="M3212.1,2384.2c-353.3-55.5-688.2-197.2-971.6-410.8c-386.2-289.6-517.7-554.6-517.7-1043.5c0-408.8,100.7-782.6,341-1273.6c655.3-1331.1,2085-2526.7,3336-2789.6c213.7-43.2,601.9-49.3,760.1-10.3c211.6,51.4,390.3,152,540.3,304c297.9,302,484.8,667.6,558.7,1092.8c49.3,273.2,39,710.7-22.6,1010.7l-10.3,55.4l-123.3-63.7c-456-234.2-1271.6,84.2-2027.5,797c-332.8,314.3-675.8,778.5-838.1,1131.9c-199.2,435.5-223.9,836.1-67.8,1088.7l39,65.7l-127.4,24.7C3910.5,2394.4,3368.2,2406.8,3212.1,2384.2z"/><path d="M1948.8-2445.2C1603.7-2841.7,1047-3482.6,712.1-3868.8C151.4-4509.7,100-4575.4,100-4643.2c0-106.8,96.6-180.8,191-143.8c24.7,10.3,423.2,349.2,887.4,751.8c464.3,404.7,1082.6,942.9,1376.3,1197.6c293.7,254.7,550.5,476.6,571.1,495.1c32.9,32.9,18.5,51.4-256.8,326.6c-160.2,160.2-291.7,291.7-293.7,291.7C2575.3-1724.2,2293.9-2048.8,1948.8-2445.2z"/></g></g></svg>
            <keep-color :keep="keep" @update-keep="updateKeep"/>
            <router-link :to="composeUrl">
                <svg @click="sendAsMail"  enable-background="new 0 0 330.001 330.001" viewBox="0 0 330.001 330.001" xmlns="http://www.w3.org/2000/svg"><path d="m173.871 177.097c-2.641 1.936-5.756 2.903-8.87 2.903-3.116 0-6.23-.967-8.871-2.903l-126.13-92.495-29.999-21.999-.001 212.398c.001 8.284 6.716 15 15 15l300.001-.001c8.285 0 15-6.716 15-14.999v-212.399l-30.001 22z"/><path d="m165.001 146.4 145.086-106.399-290.176-.001z"/></svg>
            </router-link>   
            <svg @click="removeKeep(keep.id)" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m490.667 85.333h-42.667-68.693l-7.019-28.075c-8.405-33.706-38.571-57.258-73.323-57.258h-85.931c-34.752 0-64.917 23.552-73.323 57.259l-7.019 28.075h-68.692-42.667c-11.797-.001-21.333 9.557-21.333 21.333s9.536 21.333 21.333 21.333h22.485l17.963 323.541c1.899 33.899 29.995 60.459 63.936 60.459h260.565c33.941 0 62.037-26.56 63.936-60.459l17.963-323.541h22.485c11.797 0 21.333-9.557 21.333-21.333s-9.535-21.334-21.332-21.334zm-309.59-17.728c3.691-14.677 16.811-24.939 31.957-24.939h85.931c15.147 0 28.267 10.261 31.957 24.939l4.416 17.728h-158.677zm10.923 337.728c0 11.776-9.536 21.333-21.333 21.333s-21.333-9.557-21.333-21.333v-213.333c0-11.776 9.536-21.333 21.333-21.333s21.333 9.557 21.333 21.333zm85.333 0c0 11.776-9.536 21.333-21.333 21.333s-21.333-9.557-21.333-21.333v-213.333c0-11.776 9.536-21.333 21.333-21.333s21.333 9.557 21.333 21.333zm85.334 0c0 11.776-9.536 21.333-21.333 21.333s-21.333-9.557-21.333-21.333v-213.333c0-11.776 9.536-21.333 21.333-21.333s21.333 9.557 21.333 21.333z"/></svg>
        </div>
    `,
    components: {
        keepColor,
        eventBus,
    },
    methods: {
        removeKeep(keepId) {
            this.$emit('remove-keep', keepId)
        },
        updateKeep(keep) {
            this.$emit('update-keep', keep)
        },
        togglePin() {
            this.keep.isPinned = !this.keep.isPinned
            this.updateKeep(this.keep);
        },
        sendAsMail() {
            eventBus.$emit('send-keep-as-mail', this.keep.info)
        },
    },
    computed: {
        composeUrl() {
            return `../mail/compose/${this.keep.id}`
        }
    }
}